<!DOCTYPE html>
<html lang="hu">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-sRIl4kxILFvY47J16cr9ZwB07vP4J8+LH7qKQnuqkuIAvNWLzeN8tE5YBujZqJLB" crossorigin="anonymous">
    <title>Document</title>
    <style>
        .email {

            border-color: rgb(50, 50, 50);
        }

        .email::placeholder {
            color: black;
        }

        .email:focus {


            box-shadow: none;
            border-color: rgb(50, 50, 50);
        }
    </style>
</head>

<body>

    <div class="container">
        <div class="row">
            <div class="col-12">
                <p>jankovics</p>
            </div>
        </div>
        <div class="row">
            <div class="col-6">


                <div class="pt-5">
                    <input type="text" oninput="KeresesKezdese()" class="form-control email"
                        style="height: 45px; color: black;" placeholder="Keresés..." id="kereso" name="kereso">
                </div>

                <button onclick="keres()">Keresés</button>


                <div id="eredmeny" class="eredmeny"></div>

            </div>

            <div class="col-6">




            </div>
        </div>
    </div>


    <script>


        let timer = null;
        let player;

        function KeresesKezdese() {
            clearTimeout(timer);
            timer = setTimeout(() => { keres(); }, 500);
        }

        function keres() {
            const kereso = document.getElementById("kereso").value;
            const eredmeny = document.getElementById("eredmeny");

            if (kereso.length < 3) {
                eredmeny.innerHTML = "<p>Írj be legalább 3 karaktert...</p>";
                return;
            }

            eredmeny.innerHTML = "<p>Keresés folyamatban...</p>";

            const apikulcs = "AIzaSyAvqcZuWfXHENDGZOhjSKoKyaZe4xGtTVM";
            const URL = `https://www.googleapis.com/youtube/v3/search?part=snippet&type=video&maxResults=3&q=${encodeURIComponent(kereso)}&key=${apikulcs}`;
            /*
                        fetch(URL, {
                        })
                            .then(valasz => valasz.json())
                            .then(adatok => {
            
            
                                videok = [];
            
            
                                adatok.items.forEach(item => {
                                    videok.push({
                                        videoId: item.id.videoId,
                                        title: item.snippet.title,
                                        img: item.snippet.thumbnails.medium.url
                                    });
                                });
            
                                console.log(videok);
            
            
                            });
            */

            

            //console.log(adat[0]);

            

              
        function lekerVideok(vissza) {
                fetch(URL)
                    .then(valasz => valasz.json())
                    .then(adatok => {

                        const videok = [];

                        adatok.items.forEach(item => {
                            videok.push({
                                videoId: item.id.videoId,
                                title: item.snippet.title,
                                img: item.snippet.thumbnails.medium.url
                            });
                        });

                        vissza(videok);
                    });
            }

/*
            lekerVideok(videok => {
                console.log(videok);
            });
*/


            lekerVideok(function (videok) {
                
                eredmeny.innerHTML = "";

                console.log(videok[0].title);

                if (!videok.length) {
                eredmeny.innerHTML = "<p>Nincs találat vagy hiba történt.</p>";
                return;
                }


            let div = document.createElement("div");
                div.className = "video";
                div.innerHTML = `
            <h3>${videok[0].title}</h3>
            <img src="${videok[0].img}"><br>
            <span>Kattints a megnyitáshoz</span>
        `;
                div.onclick = () => embedVideo(videoId);

                eredmeny.appendChild(div);


            

                
            //linkList.innerHTML = "";


                //linkList.innerHTML += `<p><a href=\"https://www.youtube.com/watch?v=${videoId}\" target=\"_blank\">${title}</a></p>`;


            });
           

            

        }
/*
        function embedVideo(id) {
            document.getElementById("player").innerHTML = `
        <iframe id="ytFrame" width="600" height="340" src="https://www.youtube.com/embed/${id}?enablejsapi=1" frameborder="0" allow="autoplay"></iframe>
    `;

            setTimeout(() => {
                player = new YT.Player('ytFrame');
            }, 500);
        }

        function setVolume(v) {
            if (player && player.setVolume) {
                player.setVolume(v);
            }
        }

        // YouTube API betöltése
        var tag = document.createElement('script');
        tag.src = "https://www.youtube.com/iframe_api";
        var firstScriptTag = document.getElementsByTagName('script')[0];
        firstScriptTag.parentNode.insertBefore(tag, firstScriptTag);*/
    </script>
</body>

</html>